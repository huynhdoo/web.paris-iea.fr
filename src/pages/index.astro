---
import Layout from "@layouts/Layout.astro";
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import LinkButton from "@components/LinkButton.astro";
import Socials from "@components/Socials.astro";
import Section from "@components/Section.astro";

import { SOCIALS } from "@config";
import meeting from "@assets/meeting.jpg";
import { Icon } from "astro-icon";
const title = "Institut d'Etudes Avancées de Paris";
const description =
  "L’institut d’études avancées de Paris est un centre de recherche en sciences humaines et sociales, humanités et (neuro)sciences cognitives.";

const socialCount = SOCIALS.filter(social => social.active).length;
---

<Layout>
  <Header />
  <main class="w-full max-w-6xl px-2 sm:mx-auto">
    <img src={meeting} alt="home" />
    <section class="rounded-b-lg border-2 border-t-0 border-iea-brown p-4">
      <p>
        {description}
      </p>
      <div class="text-center">
        <a
          class="text-center font-semibold hover:underline hover:decoration-dashed hover:underline-offset-4"
          href="institute"
        >
          Découvrir l'IEA</a
        >
        <Icon pack="carbon" name="arrow-right" />
      </div>

      <div class="mt-12 hidden flex-row gap-1">
        {
          // only display if at least one social link is enabled
          socialCount > 0 && (
            <>
              <div>Nos réseaux sociaux :</div>
              <Socials />
            </>
          )
        }
        <a
          target="_blank"
          href="/rss.xml"
          class="rss-link"
          aria-label="rss feed"
          title="RSS Feed"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="rss-icon"
            ><path
              d="M19 20.001C19 11.729 12.271 5 4 5v2c7.168 0 13 5.832 13 13.001h2z"
            ></path><path
              d="M12 20.001h2C14 14.486 9.514 10 4 10v2c4.411 0 8 3.589 8 8.001z"
            ></path><circle cx="6" cy="18" r="2"></circle>
          </svg>
        </a>
      </div>
    </section>
    <Section
      icon="event-schedule"
      title="Evénements"
      collection="events"
      more="Tous les événements"
    />
    <Section
      icon="document"
      title="Publications"
      collection="publications"
      more="Toutes les publications"
    />
    <Section
      icon="gateway-user-access"
      title="Résidences"
      collection="scholars"
      more="Toutes les résidences"
    />
    <Section
      icon="media-library"
      title="Médias"
      collection="medias"
      more="Tous les médias"
    />
    <Section
      icon="progress-bar"
      title="Projets"
      collection="projects"
      more="Tous les projets"
    />
  </main>
  <Footer />
</Layout>

<style>
  .social-wrapper {
    @apply mt-4 flex flex-col sm:flex-row sm:items-center;
  }
  .social-links {
    @apply mr-2 mb-1 whitespace-nowrap sm:mb-0;
  }
</style>
